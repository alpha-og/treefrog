# ===========================================
# Treefrog Backend Environment Variables
# ===========================================

# Database (PostgreSQL/Supabase)
DATABASE_URL=postgresql://postgres:password@db.xxxx.supabase.co:5432/postgres

# Migrations path (relative to latex-compiler directory)
MIGRATIONS_PATH=./migrations

# Supabase Auth (Backend - JWKS endpoint for token verification)
# In Supabase Dashboard: Settings > API > URL
SUPABASE_URL=https://xxxx.supabase.co

# Supabase Secret Key (for backend admin operations - SECRET, bypasses RLS)
# In Supabase Dashboard: Settings > API > service_role key
SUPABASE_SECRET_KEY=your-service-role-key

# Razorpay Billing
RAZORPAY_KEY_ID=rzp_test_xxxx
RAZORPAY_KEY_SECRET=your-key-secret
RAZORPAY_WEBHOOK_SECRET=your-webhook-secret
RAZORPAY_PLAN_FREE=plan_xxxx
RAZORPAY_PLAN_PRO=plan_xxxx
RAZORPAY_PLAN_ENTERPRISE=plan_xxxx

# Redis (Rate Limiting)
REDIS_URL=redis://localhost:6379

# Compiler Settings
COMPILER_WORKDIR=/tmp/treefrog-builds
COMPILER_SIGNING_KEY=change-this-to-32-char-random-string
COMPILER_URL_EXPIRY=5m

# Server Settings
SERVER_PORT=9000
SERVER_READ_TIMEOUT=15s
SERVER_WRITE_TIMEOUT=15s
SERVER_IDLE_TIMEOUT=60s
BUILD_WORKERS=4
BUILD_MAX_FILE_SIZE=104857600
BUILD_MAX_LOG_SIZE=10485760
BUILD_DEFAULT_TIMEOUT=5m

# Storage Settings
STORAGE_BUILD_TTL=24h
STORAGE_GRACE_PERIOD=1h
STORAGE_DISK_WARNING=80
STORAGE_DISK_CRITICAL=90
STORAGE_DISK_EMERGENCY=95

# Cleanup Settings
CLEANUP_INTERVAL=1h

# CORS (comma-separated origins)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:34115

# Logging
LOG_LEVEL=info
